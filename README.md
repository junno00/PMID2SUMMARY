# PubMed Abstract Summarizer

このリポジトリは、PubMedの論文情報（タイトル、著者、アブストラクトおよびPMCID）を取得し、その内容をLLM（GPT-4o）を用いて自動要約するPythonスクリプトを提供します。

## 概要

- **スクリプト**: `script/pmid2abst.py`  
  指定したPubMed IDに基づき、NCBI Eutils APIを利用して論文情報を取得します。
  - 論文のタイトル、著者情報、アブストラクト、そしてPMCIDを表示します。
  - PMCIDが取得される場合、論文全文も取得し、その内容をLLMによる要約プロセスに渡します。

- **要約チェーン**:  
  スクリプトは2つの要約チェーンをサポートします。
  - **stuffチェーン**: テキスト全体をLLMに渡し、一括して要約を生成します。
  - **refineチェーン**: 論文全文やアブストラクトを分割し、初期要約に対して追加情報を統合することで、より洗練された最終要約を出力します。

- **プロンプトの更新**:  
  プロンプトテンプレートの入力変数名を統一することで、Pydanticの検証エラー（extra_forbidden エラー）を回避し、LLMに正しい入力データを渡すように改善されています。

## 使用方法

1. 必要な依存関係をインストールしてください（例: `langchain`, `requests` など）。
2. コマンドラインからスクリプトを実行します。

### 実行例

- デフォルト（`stuff` チェーンの場合）:
  ```
  python script/pmid2abst.py <PubMedID>
  ```

- refineチェーンを利用する場合:
  ```
  python script/pmid2abst.py refine <PubMedID>
  ```

## 更新履歴

- **最新の更新**:
  - プロンプトテンプレートの入力変数名を `"text"` に統一し、extra_forbidden エラーを解消。
  - `stuff` と `refine` の各要約チェーンで一貫性のある入力命名規則を採用。

## 注意事項

- このスクリプトはNCBIのEutils APIを利用しています。大量のリクエストを送信する場合は、APIの利用制限に注意してください。
- LLMによる要約は、モデルの応答や設定（例: `temperature`）に依存するため、内容が変動する可能性があります。
